<UserControl
    x:Class="Logikfabrik.Overseer.WPF.Client.Views.BuildView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Logikfabrik.Overseer.WPF.ViewModels.DesignTime;assembly=Logikfabrik.Overseer.WPF"
    cal:Bind.AtDesignTime="True"
    d:DataContext="{d:DesignInstance d:Type=vm:BuildViewModel,
                                     d:IsDesignTimeCreatable=True}"
    d:DesignWidth="500"
    mc:Ignorable="d">
    <UserControl.Resources>
        <SolidColorBrush x:Key="BuildBorder.InProgress.Border" Color="#FF5500FF" />
        <SolidColorBrush x:Key="BuildBorder.Succeeded.Border" Color="#FFAAFF00" />
        <SolidColorBrush x:Key="BuildBorder.Stopped.Border" Color="#FFFFFF00" />
        <SolidColorBrush x:Key="BuildBorder.Failed.Border" Color="#FFFF3300" />
        <Style x:Key="BuildBorderStyle" TargetType="{x:Type Border}">
            <Setter Property="BorderThickness" Value="5,0,0,0" />
            <Setter Property="Background">
                <Setter.Value>
                    <SolidColorBrush Color="#FF444444" />
                </Setter.Value>
            </Setter>
        </Style>
        <!--  ReSharper disable once Xaml.RedundantResource  -->
        <Style
            x:Key="BuildSucceededBorderStyle"
            BasedOn="{StaticResource BuildBorderStyle}"
            TargetType="{x:Type Border}">
            <Setter Property="BorderBrush" Value="{StaticResource BuildBorder.Succeeded.Border}" />
        </Style>
        <!--  ReSharper disable once Xaml.RedundantResource  -->
        <Style
            x:Key="BuildInProgressBorderStyle"
            BasedOn="{StaticResource BuildBorderStyle}"
            TargetType="{x:Type Border}">
            <Setter Property="BorderBrush" Value="{StaticResource BuildBorder.InProgress.Border}" />
        </Style>
        <!--  ReSharper disable once Xaml.RedundantResource  -->
        <Style
            x:Key="BuildFailedBorderStyle"
            BasedOn="{StaticResource BuildBorderStyle}"
            TargetType="{x:Type Border}">
            <Setter Property="BorderBrush" Value="{StaticResource BuildBorder.Failed.Border}" />
        </Style>
        <!--  ReSharper disable once Xaml.RedundantResource  -->
        <Style
            x:Key="BuildStoppedBorderStyle"
            BasedOn="{StaticResource BuildBorderStyle}"
            TargetType="{x:Type Border}">
            <Setter Property="BorderBrush" Value="{StaticResource BuildBorder.Stopped.Border}" />
        </Style>





        <Style BasedOn="{StaticResource TextBlockDefaultStyle}" TargetType="{x:Type TextBlock}">
            <Setter Property="TextTrimming" Value="CharacterEllipsis" />
            <Setter Property="TextWrapping" Value="NoWrap" />
        </Style>
        <Style TargetType="{x:Type Viewbox}">
            <Setter Property="Width" Value="16" />
            <Setter Property="Height" Value="16" />
            <Setter Property="Margin" Value="5,5,0,5" />
        </Style>
        <Style TargetType="{x:Type Canvas}">
            <Setter Property="Width" Value="20" />
            <Setter Property="Height" Value="20" />
        </Style>
    </UserControl.Resources>
    <Border>
        <Border.Style>
            <MultiBinding Converter="{StaticResource BuildStatusToStyleConverter}" ConverterParameter="Build{0}BorderStyle">
                <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=UserControl}" />
                <Binding Path="Status" />
            </MultiBinding>
        </Border.Style>
        <StackPanel>

            <TextBlock
                FontSize="16"
                FontWeight="SemiBold"
                Text="{Binding Name, Mode=OneWay}" />
            <WrapPanel>
                <StackPanel x:Name="ShowStartTime" Orientation="Horizontal">
                    <Viewbox>
                        <Canvas>
                            <Path Data="M17,3L16,3 16,5 13,5 13,3 7,3 7,5 4,5 4,3 3,3C1.899,3,1,3.9,1,5L1,17C1,18.1,1.899,19,3,19L17,19C18.1,19,19,18.1,19,17L19,5C19,3.9,18.1,3,17,3z M17,17L3,17 3,9 17,9 17,17z M6.5,1L4.5,1 4.5,4.5 6.5,4.5 6.5,1z M15.5,1L13.5,1 13.5,4.5 15.5,4.5 15.5,1z" Fill="#FFFFFFFF" />
                        </Canvas>
                    </Viewbox>
                    <TextBlock Text="{Binding StartTime, Mode=OneWay}" />
                </StackPanel>
                <StackPanel x:Name="ShowRequestedBy" Orientation="Horizontal">
                    <Viewbox>
                        <Canvas>
                            <Path Data="M7.725,2.146C6.709,2.902 6.436,4.099 6.486,4.736 6.55,5.515 6.708,6.529 6.708,6.529 6.708,6.529 6.395,6.699 6.395,7.383 6.504,9.1 7.078,8.359 7.196,9.112 7.48,10.926 8.129,10.603 8.129,11.593 8.129,13.242 7.449,14.013 5.326,14.927 3.196,15.845 1,17 1,19L1,20 19,20 19,19C19,17 16.803,15.845 14.672,14.928 12.549,14.014 11.871,13.244 11.871,11.594 11.871,10.604 12.518,10.927 12.803,9.113 12.922,8.36 13.495,9.101 13.606,7.384 13.606,6.7 13.292,6.53 13.292,6.53 13.292,6.53 13.45,5.516 13.513,4.737 13.578,3.92 13.115,2.176 11.213,1.641 10.88,1.301 10.655,0.760000000000001 11.679,0.217000000000001 9.439,0.112 8.918,1.284 7.725,2.146z" Fill="#FFFFFFFF" />
                        </Canvas>
                    </Viewbox>
                    <TextBlock Text="{Binding RequestedBy, Mode=OneWay}" />
                </StackPanel>

                <StackPanel x:Name="ShowBranch" Orientation="Horizontal">
                    <Viewbox>
                        <Canvas>
                            <Path Data="M16.4,4C16.4,2.674 15.326,1.6 14,1.6 12.674,1.6 11.6,2.674 11.6,4 11.6,4.961 12.168,5.784 12.984,6.167 12.902,7.751 11.714,8.289 9.649,9.063 8.779,9.39 7.82,9.752 7,10.297L7,6.176C7.825,5.796 8.4,4.967 8.4,4 8.4,2.674 7.326,1.6 6,1.6 4.674,1.6 3.6,2.674 3.6,4 3.6,4.967 4.176,5.796 5,6.176L5,13.825C4.175,14.204 3.6,15.033 3.6,16 3.6,17.326 4.674,18.4 6,18.4 7.326,18.4 8.4,17.325 8.4,16 8.4,15.039 7.832,14.216 7.016,13.833 7.098,12.25 8.287,11.711 10.351,10.937 12.381,10.175 14.892,9.226 14.991,6.181 15.82,5.803 16.4,4.971 16.4,4z M6,2.615C6.764,2.615 7.384,3.234 7.384,4 7.384,4.764 6.764,5.385 6,5.385 5.235,5.385 4.616,4.764 4.616,4 4.616,3.234 5.235,2.615 6,2.615z M6,17.385C5.234,17.385 4.615,16.764 4.615,16 4.615,15.234 5.234,14.615 6,14.615 6.764,14.615 7.384,15.234 7.384,16 7.384,16.764 6.764,17.385 6,17.385z M14,5.385C13.234,5.385 12.615,4.764 12.615,4 12.615,3.234 13.234,2.615 14,2.615 14.764,2.615 15.384,3.234 15.384,4 15.384,4.764 14.764,5.385 14,5.385z" Fill="#FFFFFFFF" />
                        </Canvas>
                    </Viewbox>
                    <TextBlock Text="{Binding Branch, Mode=OneWay}" />
                </StackPanel>
            </WrapPanel>
            <TextBlock FontSize="16" Text="{Binding Message, Mode=OneWay}" />

            <ItemsControl ItemsSource="{Binding Changes, Mode=OneWay}">
                <ItemsControl.Template>
                    <ControlTemplate>
                        <ScrollViewer Height="116" Style="{StaticResource ScrollViewerDefaultStyle}">
                            <ItemsPresenter />
                        </ScrollViewer>
                    </ControlTemplate>
                </ItemsControl.Template>
            </ItemsControl>
        </StackPanel>
    </Border>
</UserControl>