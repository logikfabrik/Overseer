<UserControl
    x:Class="Logikfabrik.Overseer.WPF.Client.Views.EditConnectionView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Logikfabrik.Overseer.WPF.Client.Properties"
    xmlns:uc="clr-namespace:Logikfabrik.Overseer.WPF.Client.Views.UserControls"
    d:DesignHeight="300"
    d:DesignWidth="300"
    mc:Ignorable="d">
    <ScrollViewer>
        <StackPanel>
            <ContentControl
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                cal:View.Model="{Binding Settings, Mode=OneWay}"
                Focusable="False" />
            <StackPanel Style="{StaticResource Common.Panel}">
                <Grid>
                    <Button
                        x:Name="TryConnect"
                        Content="{x:Static p:Resources.EditConnection_Button_TryConnect}"
                        IsEnabled="{Binding IsValidAndHasNotConnected, Mode=OneWay}"
                        ToolTip="{x:Static p:Resources.EditConnection_Button_TryConnect}" />
                    <uc:ProgressControl
                        VerticalAlignment="Top"
                        IsErrored="{Binding ConnectionTask.Status, Converter={StaticResource TaskStatusFaultedToBooleanConverter}}"
                        IsInProgress="{Binding ConnectionTask.Status, Converter={StaticResource TaskStatusRunningToBooleanConverter}}" />
                </Grid>
                <TextBlock Text="{Binding ConnectionTask.Exception, Converter={StaticResource EditConnectionViewExceptionToLocalizedStringConverter}}" Visibility="{Binding ConnectionTask.Status, Converter={StaticResource TaskStatusFaultedToVisibilityConverter}}" />
            </StackPanel>
            <StackPanel Style="{StaticResource Common.Panel}" Visibility="{Binding HasConnected, Converter={StaticResource BooleanToVisibilityConverter}}">
                <TextBlock Style="{StaticResource Common.Label}" Text="{x:Static p:Resources.ConnectionSettings_Setting_Label_TrackedProjects}" />
                <ContentControl
                    MaxHeight="304"
                    HorizontalAlignment="Stretch"
                    cal:View.Model="{Binding Settings.TrackedProjects, Mode=OneWay}"
                    Focusable="False" />
            </StackPanel>
            <StackPanel Style="{StaticResource Common.Panel}">
                <TextBlock Style="{StaticResource Common.Label}" Text="{x:Static p:Resources.ConnectionSettings_Setting_Label_BuildsPerProject}" />
                <TextBlock Style="{StaticResource Common.Description}" Text="{x:Static p:Resources.ConnectionSettings_Setting_Description_BuildsPerProject}" />
                <TextBox Text="{Binding Settings.BuildsPerProject, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}" />
            </StackPanel>
            <WrapPanel Style="{StaticResource Common.Footer}">
                <Button
                    x:Name="Edit"
                    Content="{x:Static p:Resources.EditConnection_Button_Edit}"
                    IsDefault="True"
                    IsEnabled="{Binding IsValidAndHasConnected, Mode=OneWay}"
                    ToolTip="{x:Static p:Resources.EditConnection_Button_Edit}" />
                <Button
                    x:Name="TryClose"
                    Content="{x:Static p:Resources.EditConnection_Button_Cancel}"
                    IsCancel="True"
                    ToolTip="{x:Static p:Resources.EditConnection_Button_Cancel}" />
            </WrapPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>